\documentclass[multi=step]{standalone}

% The idea here, for now,
% is to construct a framework flexible enough
% to easily draw the various states of the files/tree/history,
% so it becomes easier to animate afterwards.
% This file will be typically (re-)generated from some other script.

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{mathptmx}
\usepackage[T1]{fontenc}

\usepackage{xkeyval}
\usepackage{etoolbox}
\usepackage{tikz}%
  \usetikzlibrary{math}
  \usetikzlibrary{positioning}
  \usetikzlibrary{calc}
  \usetikzlibrary{arrows.meta}
\tikzset{
  x=1mm,
  y=1mm,
  inner sep=0,
  file tree line/.style={line width=1.5, line cap=round},
  % https://tex.stackexchange.com/a/447931/72679
  local to/.style={
      shift={(#1.center)},
      x={(#1.east)},
      y={(#1.north)},
  }
}

\tikzmath{
  \eps = 0.1; % Useful to avoid seemingly pixel-rounding errors.
}

\input{palette}
\input{step}
\input{files}
\input{diff}
\input{repo}

\newcommand{\TitleText}{<no-title>}
\newcommand{\SubTitleText}{<no-subtitle>}
\newcommand{\PageNumText}{<no-page-number>}
\newcommand{\Progress}{1/2}

\begin{document}%

% Use SLIDE marks for python to easily find all slides.
% Also, this file is parsed lexically in a very brutal way,
% so whitespace and comments are not always insignificant.
% Just use it as a stub so python scripts can bootstrap and generate steps.

% SLIDE Introduction
\renewcommand{\TitleText}{Introduction}
\renewcommand{\SubTitleText}{Git and git clients}
\renewcommand{\PageNumText}{1}
\renewcommand{\Progress}{1/3}
\Step{

} % ENDSLIDE

% SLIDE Pizzas
\renewcommand{\TitleText}{The Pizzas repo}
\renewcommand{\SubTitleText}{Crafting your first commits}
\renewcommand{\PageNumText}{2}
\renewcommand{\Progress}{2/3}
\Step{

  \FirstFile[folder, mod=0]{Canvas.north west}{A}{rootfolder}

  \def\FileSpacing{10}
  \Diff[m][north east][A]{Canvas.north east}{file.ext}{
    +/{One line},
  }
  \Diff[0][north east][A]{$(A.south east) + (0, -\FileSpacing)$}{other.ext}{
    -/{Another line.},
  }

  \Repo[south west]{Canvas.south west}{
    01e8c8c/{First commit, the intent.},
    4e29052/{First pizza: Margherita.},
    45a5b65/{Add note to the Margherita.},
    17514f2/{Add Regina. List pizzas in README.},
  }
  \Branch{17514f2}{40:20}{-.5,0}{main}
  \Head{45a5b65}{155:20}{.5,0}

} % ENDSLIDE

\end{document}

