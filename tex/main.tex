\documentclass[multi=step]{standalone}

% The idea here, for now,
% is to construct a framework flexible enough
% to easily draw the various states of the files/tree/history,
% so it becomes easier to animate afterwards.
% This file will be typically (re-)generated from some other script.

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{mathptmx}
\usepackage[T1]{fontenc}

\usepackage{xkeyval}
\usepackage{etoolbox}
\usepackage{tikz}%
  \usetikzlibrary{math}
  \usetikzlibrary{positioning}
  \usetikzlibrary{calc}
  \usetikzlibrary{arrows.meta}
\tikzset{
  x=1mm,
  y=1mm,
  inner sep=0,
  file tree line/.style={line width=1.5, line cap=round},
  % https://tex.stackexchange.com/a/447931/72679
  local to/.style={
      shift={(#1.center)},
      x={(#1.east)},
      y={(#1.north)},
  }
}

\tikzmath{
  \eps = 0.1; % Useful to avoid seemingly pixel-rounding errors.
}

\input{palette}
\input{step}
\input{files}
\input{diff}
\input{repo}

\newcommand{\TitleText}{<no-title>}
\newcommand{\SubTitleText}{<no-subtitle>}
\newcommand{\PageNumText}{<no-page-number>}
\newcommand{\Progress}{1/2}

\begin{document}%

% Use SLIDE marks for python to easily find all slides.

% SLIDE Introduction
\renewcommand{\TitleText}{Introduction}
\renewcommand{\SubTitleText}{Git and git clients}
\renewcommand{\PageNumText}{1}
\renewcommand{\Progress}{1/3}
\Step{

} % ENDSLIDE

% SLIDE Pizzas
\renewcommand{\TitleText}{The Pizzas repo}
\renewcommand{\SubTitleText}{Crafting your first commits}
\renewcommand{\PageNumText}{2}
\renewcommand{\Progress}{2/3}
\Step{

  \FirstFile[folder, mod=0]{Canvas.north west}{A}{pizzas}
  \FirstChild[folder, mod=0]{A}{B}{.git}
  \AppendSibling[file, mod=0, connect]{B}{C}{README.md}
  \AppendSibling[file, mod=0, connect]{C}{D}{margherita.md}
  \AppendSibling[file, mod=0, connect, last]{D}{E}{regina.md}

  \def\FileSpacing{10}

  \FileContent[0][north east][A]{Canvas.north east}
  {README.md}{
    0/{Collect and distribute the best pizzas recipes.},
    0/{},
    0/{Where to find the pizza in the project:},
    0/{},
    0/{- \_\_Margherita\_\_: `./margherita.md`},
    0/{- \_\_Regina\_\_: `./regina.md`},
  }

  \FileContent[0][north east][A]{$(A.south east) + (0, -\FileSpacing)$}
  {margherita.md}{
    0/{\# Margerita},
    0/{},
    0/{The simplest and most famous,},
    0/{the one to pick when you're unsure},
    0/{whether the cook is good.},
    0/{},
    0/{\_\_Base:\_\_ tomato sauce},
    0/{\_\_Topping:\_\_},
    0/{- Mozzarella},
    0/{- Basil},
    0/{},
    0/{*Note:*},
    0/{It is said that this pizza},
    0/{has only three ingredients},
    0/{corresponding to the three colors},
    0/{on the Italian flag.},
    0/{Nevertheless, it is always good},
    0/{and *authorized* to add},
    0/{olive oil, salt, or oregano.},
  }

  \FileContent[0][north east]{$(A.south east) + (0, -\FileSpacing)$}
  {regina.md}{
    0/{\# Regina},
    0/{},
    0/{This audacious pizza},
    0/{would be named from queen},
    0/{Elena of Montenegro.},
    0/{Created by pizzaiolo},
    0/{Raffaele Esposito.},
    0/{},
    0/{\_\_Base:\_\_ tomato sauce  },
    0/{\_\_Topping:\_\_},
    0/{- Mozzarella},
    0/{- Ham},
    0/{- Mushrooms },
  }

  \Repo[south west]{Canvas.south west}{
    01e8c8c/{First commit, the intent.},
    4e29052/{First pizza: Margherita.},
    45a5b65/{Add note to the Margherita.},
    17514f2/{Add Regina. List pizzas in README.},
  }
  \Branch{17514f2}{40:20}{-.5,0}{main}
  \Head{45a5b65}{155:20}{.5,0}

} % ENDSLIDE

\end{document}

