\documentclass[multi=step]{standalone}

% The idea here, for now,
% is to construct a framework flexible enough
% to easily draw the various states of the files/tree/history,
% so it becomes easier to animate afterwards.
% This file will be typically (re-)generated from some other script.

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{mathptmx}
\usepackage[T1]{fontenc}

\usepackage{xkeyval}
\usepackage{etoolbox}
\usepackage{tikz}%
  \usetikzlibrary{math}
  \usetikzlibrary{positioning}
  \usetikzlibrary{calc}
  \usetikzlibrary{arrows.meta}
\tikzset{
  x=1mm,
  y=1mm,
  inner sep=0,
  file tree line/.style={line width=1.5, line cap=round},
  % https://tex.stackexchange.com/a/447931/72679
  local to/.style={
      shift={(#1.center)},
      x={(#1.east)},
      y={(#1.north)},
  }
}

\tikzmath{
  \eps = 0.1; % Useful to avoid seemingly pixel-rounding errors.
}

\input{palette}
\input{step}
\input{files}
\input{diff}
\input{commits}

\newcommand{\TitleText}{<no-title>}
\newcommand{\SubTitleText}{<no-subtitle>}
\newcommand{\PageNumText}{<no-page-number>}
\newcommand{\Progress}{1/2}

\begin{document}%

\renewcommand{\TitleText}{Title}
\renewcommand{\SubTitleText}{Subtitle}
\renewcommand{\PageNumText}{99}
\renewcommand{\Progress}{1/3}
\Step{

}

\renewcommand{\SubTitleText}{NextSlide}
\renewcommand{\PageNumText}{100}
\renewcommand{\Progress}{2/3}
\Step{

  \node[anchor=north west] (A) at (Canvas.north west) {\Folder[m]};
  \NameFile[folder, mode=m]{A}{folder\_name}
  \AppendSibling[file]{A}{B}{filename.ext}
  \AppendSibling[folder]{B}{C}{container}

  \FirstChild[file, mod=+]{C}{D}{contained.ext}
  \AppendSibling[file, connect]{D}{E}{other.ext}
  \AppendSibling[folder, connect, last, mod=-]{E}{F}{subcontainer}

  \FirstChild[file, last, mod=-]{F}{G}{inner.ext}

  \coordinate (top) at ($(Canvas.center)!.5!(Canvas.north)$);

  \FileContent[+]{$(Canvas.center)!.5!(Canvas.north)$}{Filename.ext}{
    +/{First line in the file, added style.},
    0/{Second line, neutral style},
    -/{Third line, removed style},
    m/{Fourth line, modified style}
  }

  \coordinate (tp) at ($(Canvas.south)!.5!(Canvas.south west)$);
  \Commits{$(tp) + (0, 15)$}{
    hash256/{Commit message.},
    dbc41a4/{Second commit.},
    9f1d6da/{Third commit with a longer message.},
    0c4381c/{Latest commit, with the branch and HEAD.}
  }

  \Branch{0c4381c}{40:20}{-.5,0}{main}
  \Head{9f1d6da}{155:20}{.5,0}

}

\end{document}

